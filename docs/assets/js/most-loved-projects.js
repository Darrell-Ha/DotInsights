!function(u){"use strict";window.DotInsights=window.DotInsights||{},DotInsights.Projects=DotInsights.Projects||{},DotInsights.FilteredProjects=DotInsights.FilteredProjects||{},DotInsights.Query=DotInsights.Query||{itemsPerPage:50,maxNumPages:1,page:1,foundItems:0},DotInsights.Pagination=DotInsights.Pagination||{},DotInsights.FilteredProjects=DotInsights.FilteredProjects||{},window.innerWidth<561?DotInsights.Pagination.midSize=2:DotInsights.Pagination.midSize=3,window.innerWidth<768?DotInsights.Query.itemsPerPage=10:DotInsights.Query.itemsPerPage=50;var h=window.DotInsights.Helpers,i=u("#project-form-filter"),e=i.find(".search-submit"),t=null,m=u("#most-loved-projects-table tbody"),a=u("#most-loved-projects-pagination"),f=(u(document.body).on("DotInsights/EcosystemMap/Loaded",function(){DotInsights.FilteredProjects=DotInsights.Projects;var e=DotInsights.FilteredProjects.length;DotInsights.Query.page=1,DotInsights.Query.foundItems=e,DotInsights.Query.maxNumPages=0<DotInsights.Query.itemsPerPage?Math.ceil(e/DotInsights.Query.itemsPerPage):1,o(),n()}),i.on("keyup",".search-field",function(){clearTimeout(t),t=setTimeout(function(){e.addClass("updating-icon"),setTimeout(function(){e.removeClass("updating-icon"),u(document.body).trigger("DotInsights/EcosystemMap/Searching")},300)},700)}),i.on("submit",function(e){return clearTimeout(t),t=setTimeout(function(){u(document.body).trigger("DotInsights/EcosystemMap/Searching")},700),!1}),u(document.body).on("DotInsights/EcosystemMap/Searching",function(e){var t=i.find('input[name="s"]').val(),s=[],t=(""!==t&&s.push({key:"project",value:t,operator:"like"}),DotInsights.FilteredProjects=0<s.length?h.filterByRules(s,DotInsights.Projects):DotInsights.Projects,DotInsights.FilteredProjects.length);DotInsights.Query.page=1,DotInsights.Query.foundItems=t,DotInsights.Query.maxNumPages=0<DotInsights.Query.itemsPerPage?Math.ceil(t/DotInsights.Query.itemsPerPage):1,o(),n()}),[{project_slug:"polkadot",name:"Polkadot",likes:7927,r:197,fontSize:30},{project_slug:"subwallet",name:"SubWallet",likes:6827,r:144,fontSize:20},{project_slug:"ampnet",name:"Ampnet",likes:4072,r:107,fontSize:18},{project_slug:"acala",name:"Acala",likes:4072,r:88,fontSize:16},{project_slug:"demodyfi",name:"Demodyfi",likes:5072,r:121,fontSize:16},{project_slug:"chainsafe",name:"ChainSafe",likes:2989,r:102,fontSize:16},{project_slug:"1beam",name:"1beam",likes:2989,r:102,fontSize:16},{project_slug:"unilend",name:"Unilend",likes:2025,r:96,fontSize:16},{project_slug:"metamask",name:"MetaMask",likes:3325,r:76,fontSize:16},{project_slug:"onfinality",name:"OnFinality",likes:2028,r:68,fontSize:16},{project_slug:"nabox",name:"Nabox",likes:1931,r:77,fontSize:16},{project_slug:"anchor",name:"Anchor",likes:1931,r:52,fontSize:16},{project_slug:"athos_finance",name:"Athos Finance",likes:1092,r:64,fontSize:16},{project_slug:"huckleberry",name:"Huckleberry",likes:821,r:39,fontSize:16},{project_slug:"ambire_wallet",name:"Ambire Wallet",likes:821,r:48,fontSize:16},{project_slug:"polkafoundry",name:"PolkaFoundry",likes:821,r:57,fontSize:16},{project_slug:"lido",name:"Lido",likes:821,r:60,fontSize:16},{project_slug:"beyondfi",name:"BeyondFi",likes:821,r:38,fontSize:16},{project_slug:"basilisk",name:"Basilisk",likes:821,r:49,fontSize:16},{project_slug:"avault",name:"Avault",likes:821,r:35,fontSize:16},{project_slug:"curve",name:"Curve",likes:821,r:60,fontSize:16},{project_slug:"linear",name:"Linear",likes:821,r:54,fontSize:16},{project_slug:"prime_protocol",name:"Prime Protocol",likes:821,r:33,fontSize:16},{project_slug:"riodefi",name:"RioDeFi",likes:821,r:57,fontSize:16},{project_slug:"parallel",name:"Parallel",likes:821,r:76,fontSize:16}]),v=f.length,y=u("#bubble-projects");function s(){y.empty();var e=y.width(),t=[],s={},i=!1,o=0,n=0,a=1,r=(window.innerWidth<768?a=.5:window.innerWidth<1200&&(a=.8),2115-window.innerWidth);r*=a,r=Math.max(r,700),y.height(r);for(var l=0;l<v;l++){var c=DotInsights.NumberUtil.precisionRoundMod(f[l].r*a,0);f[l].displayR=Math.max(c,40)}for(;t.length<v&&o<1e4;){(s=f[n]).x=DotInsights.NumberUtil.getRandomInt(s.displayR,e-s.displayR),s.y=DotInsights.NumberUtil.getRandomInt(s.displayR,r-s.displayR);for(i=!1,l=0;l<t.length;l++){var g=t[l];if(DotInsights.NumberUtil.dist(s.x,s.y,g.x,g.y)<s.displayR+g.displayR){i=!0;break}}i||(t.push(s),n++),o++}for(var d=["move-slow","move-normal","move-fast"],l=0;l<t.length;l++){var p=t[l],h="bubble-project bubble-project--"+p.project_slug,h='<div class="'+((h+=l%2==0?" move-vertical":" move-vertical-reversed")+(" "+d[DotInsights.NumberUtil.getRandomInt(0,3)]))+'">',h=(h=(h+='<img src="./assets/images/bubbles/'+p.project_slug+'.png" alt="">')+("<h3>"+p.name+'</h3><div class="total-likes"><svg><use xlink:href="#symbol-ph-heart-straight"></use></svg>'+p.likes+"</div>"),u(h+="</div>"));h.css({width:2*p.displayR,height:2*p.displayR,top:p.y-p.displayR,left:p.x-p.displayR}),h.css("--circle-size",2*p.displayR+"px"),y.append(h)}}function o(e=!1){for(var t=(DotInsights.Query.page-1)*DotInsights.Query.itemsPerPage+1,s="",i=(i=t+DotInsights.Query.itemsPerPage)>DotInsights.Query.foundItems?DotInsights.Query.foundItems+1:i,o=t;o<i;o++)var n=DotInsights.FilteredProjects[o-1],a="row-project",r=n.rank<=3,l='<span class="rank-number">'+n.rank+"</span>",l=r?'<svg><use xlink:href="#symbol-crown"></use></svg>'+l:l,r=(a+=r?" row-project-highlight":"","project-layer"),r=(r+=n.layer?" project-layer-color--"+h.sanitizeKey(n.layer):"","string"==typeof n.layer?'<span class="'+r+'">'+n.layer+"</span>":'<span class="text-placeholder">--</span>'),c=""!==n.token?n.token:'<span class="text-placeholder">--</span>',g='<input type="checkbox" readonly disabled class="project-is-native"'+(!0===n.native?" checked":"")+" />",d="project-category project-cat-color--"+n.category_slug,p="./assets/images/projects/"+n.project_slug+".png",s=(s=(s=(s=(s=(s=(s+='<tr class="'+a+'">')+('<td class="col-project-info"><a href="'+n.website+'" target="_blank" rel="nofollow" class="project-info"><div class="project-rank">'+l+'</div><div class="project-thumbnail"><img src="'+p+'" alt="'+n.project+'" width="80" height="80"/></div><div class="project-details"><h3 class="project-name">'+n.project+'</h3><p class="'+d+'">'+n.category+"</p></div></a></td>")+('<td class="col-project-layer">'+r+"</td>"))+('<td class="col-project-token"><span class="project-token">'+c+"</span></td>")+('<td class="col-project-native">'+g+"</td>"))+('<td class="col-project-github">'+k(n)+"</td>"))+('<td class="col-project-twitter">'+j(n)+"</td>"))+('<td class="col-mobile-project-info">'+('<div class="project-info-line"><div class="label">Native: </div>'+'<div class="value">'+g+"</div></div>"+'<div class="project-info-line"><div class="label">Layer: </div>'+'<div class="value">'+r+"</div></div>"+'<div class="project-info-line"><div class="label">Token: </div>'+'<div class="value">'+c+"</div></div>"+'<div class="project-info-line"><div class="label">Github: </div>'+'<div class="value">'+k(a=n)+"</div></div>"+'<div class="project-info-line"><div class="label">Twitter: </div>'+'<div class="value">'+j(a)+"</div></div>")+"</td>"))+('<td class="col-project-love">'+(l=n,d=p=void 0,p=DotInsights.VotedProjects.includes(l.project_id),d="button btn-vote",d+=p?" unvote-this":" vote-this",'<a href="#" data-project-id="'+l.project_id+'" class="'+d+'"><svg class="button-icon"><use xlink:href="#symbol-ph-heart-straight"></use></svg><span class="button-text">'+DotInsights.NumberUtil.formatWithCommas(l.vote_count)+"</span></a>")+"</td>")+"</tr>";e?m.append(s):m.html(s)}function n(){var e="",t=DotInsights.Query.maxNumPages;if(1<t){for(var s=DotInsights.Query.page,i=[s],o=1,n=s-1;0<n&&(i.unshift(n),o!==DotInsights.Pagination.midSize);n--)o++;for(o=1,n=s+1;n<=t&&(i.push(n),o!==DotInsights.Pagination.midSize);n++)o++;e+="<ul>",1<s&&(e+='<li><a href="#" class="page-prev"  data-page="'+(s-1)+'"><svg xmlns="http://www.w3.org/2000/svg" width="192" height="192" fill="#000000" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><polyline points="56 48 136 128 56 208" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></polyline><polyline points="136 48 216 128 136 208" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></polyline></svg></a></li>');for(n=0;n<i.length;n++)e=(e+="<li>")+(i[n]===s?'<span class="page-numbers current">'+i[n]+"</a>":'<a href="#" class="page-numbers" data-page="'+i[n]+'">'+i[n]+"</a>")+"</li>";s<t&&(e+='<li><a href="#" class="page-next" data-page="'+(s+1)+'"><svg xmlns="http://www.w3.org/2000/svg" width="192" height="192" fill="#000000" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><polyline points="56 48 136 128 56 208" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></polyline><polyline points="136 48 216 128 136 208" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></polyline></svg></a></li>'),e+="</ul>"}a.html(e)}function j(e){var t;return e.twitter&&""!==e.twitter&&"N/A"!==e.twitter?(t=(t=e.twitter.replace("https://twitter.com/","@")).replace("https://mobile.twitter.com/","@",t),t=DotInsights.StringUtil.rtrim(t,"/"),'<a href="'+e.twitter+'" target="_blank" class="project-link-twitter">'+t+"</a>"):'<span class="text-placeholder">--</span>'}function k(e){return e.github&&""!==e.github&&"N/A"!==e.github?'<a href="'+e.github+'" target="_blank" class="project-link-github"><span class="fab fa-github"></span></a>':'<span class="text-placeholder">--</span>'}u(document).ready(function(){s()}),u(window).on("hresize",function(){window.innerWidth<561?DotInsights.Pagination.midSize=2:DotInsights.Pagination.midSize=3,window.innerWidth<768?DotInsights.Query.itemsPerPage=10:DotInsights.Query.itemsPerPage=50}),u(window).on("hresize_one",function(){s()}),a.on("click","a",function(e){e.preventDefault(),DotInsights.Query.page=u(this).data("page");e=m.offset().top-120;u("html, body").animate({scrollTop:e},200),o(),n()})}(jQuery);