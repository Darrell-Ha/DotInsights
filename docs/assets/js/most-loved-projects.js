!function(y){"use strict";window.dotinsights=window.dotinsights||{},dotinsights.Projects=dotinsights.Projects||{},dotinsights.FilteredProjects=dotinsights.FilteredProjects||{},dotinsights.Query=dotinsights.Query||{itemsPerPage:50,maxNumPages:1,page:1,foundItems:0},dotinsights.Pagination=dotinsights.Pagination||{},dotinsights.FilteredProjects=dotinsights.FilteredProjects||{},window.innerWidth<561?dotinsights.Pagination.midSize=2:dotinsights.Pagination.midSize=3,window.innerWidth<768?dotinsights.Query.itemsPerPage=10:dotinsights.Query.itemsPerPage=50;var h=window.dotinsights.Helpers,s=y("#project-form-filter"),t=s.find(".search-submit"),e=null,u=y("#most-loved-projects-table tbody"),a=y("#most-loved-projects-pagination");function o(t=!1){for(var e=(dotinsights.Query.page-1)*dotinsights.Query.itemsPerPage+1,i="",s=(s=e+dotinsights.Query.itemsPerPage)>dotinsights.Query.foundItems?dotinsights.Query.foundItems+1:s,o=e;o<s;o++)var n=dotinsights.FilteredProjects[o-1],a="row-project",r=n.rank<=3,l='<span class="rank-number">'+n.rank+"</span>",l=r?'<svg><use xlink:href="#symbol-crown"></use></svg>'+l:l,r=(a+=r?" row-project-highlight":"","project-layer"),r=(r+=n.layer?" project-layer-color--"+h.sanitizeKey(n.layer):"","string"==typeof n.layer?'<span class="'+r+'">'+n.layer+"</span>":'<span class="text-placeholder">--</span>'),d=""!==n.token?n.token:'<span class="text-placeholder">--</span>',c='<input type="checkbox" readonly disabled class="project-is-native"'+(!0===n.native?" checked":"")+" />",g="project-category project-cat-color--"+n.category_slug,p="./assets/images/projects/"+n.project_slug+".png",i=(i=(i=(i=(i=(i=(i+='<tr class="'+a+'">')+('<td class="col-project-info"><a href="'+n.website+'" target="_blank" rel="nofollow" class="project-info"><div class="project-rank">'+l+'</div><div class="project-thumbnail"><img src="'+p+'" alt="'+n.project+'" width="80" height="80"/></div><div class="project-details"><h3 class="project-name">'+n.project+'</h3><p class="'+g+'">'+n.category+"</p></div></a></td>")+('<td class="col-project-layer">'+r+"</td>"))+('<td class="col-project-token"><span class="project-token">'+d+"</span></td>")+('<td class="col-project-native">'+c+"</td>"))+('<td class="col-project-github">'+v(n)+"</td>"))+('<td class="col-project-twitter">'+m(n)+"</td>"))+('<td class="col-mobile-project-info">'+('<div class="project-info-line"><div class="label">Native: </div>'+'<div class="value">'+c+"</div></div>"+'<div class="project-info-line"><div class="label">Layer: </div>'+'<div class="value">'+r+"</div></div>"+'<div class="project-info-line"><div class="label">Token: </div>'+'<div class="value">'+d+"</div></div>"+'<div class="project-info-line"><div class="label">Github: </div>'+'<div class="value">'+v(a=n)+"</div></div>"+'<div class="project-info-line"><div class="label">Twitter: </div>'+'<div class="value">'+m(a)+"</div></div>")+"</td>"))+('<td class="col-project-love">'+(l=n,g=p=void 0,p=dotinsights.VotedProjects.includes(l.project_id),g="button btn-vote",g+=p?" unvote-this":" vote-this",'<a href="#" data-project-id="'+l.project_id+'" class="'+g+'"><svg class="button-icon"><use xlink:href="#symbol-ph-heart-straight"></use></svg><span class="button-text">'+dotinsights.NumberUtil.formatWithCommas(l.vote_count)+"</span></a>")+"</td>")+"</tr>";t?u.append(i):u.html(i)}function n(){var t="",e=dotinsights.Query.maxNumPages;if(1<e){for(var i=dotinsights.Query.page,s=[i],o=1,n=i-1;0<n&&(s.unshift(n),o!==dotinsights.Pagination.midSize);n--)o++;for(o=1,n=i+1;n<=e&&(s.push(n),o!==dotinsights.Pagination.midSize);n++)o++;t+="<ul>",1<i&&(t+='<li><a href="#" class="page-prev"  data-page="'+(i-1)+'"><svg xmlns="http://www.w3.org/2000/svg" width="192" height="192" fill="#000000" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><polyline points="56 48 136 128 56 208" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></polyline><polyline points="136 48 216 128 136 208" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></polyline></svg></a></li>');for(n=0;n<s.length;n++)t=(t+="<li>")+(s[n]===i?'<span class="page-numbers current">'+s[n]+"</a>":'<a href="#" class="page-numbers" data-page="'+s[n]+'">'+s[n]+"</a>")+"</li>";i<e&&(t+='<li><a href="#" class="page-next" data-page="'+(i+1)+'"><svg xmlns="http://www.w3.org/2000/svg" width="192" height="192" fill="#000000" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><polyline points="56 48 136 128 56 208" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></polyline><polyline points="136 48 216 128 136 208" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></polyline></svg></a></li>'),t+="</ul>"}a.html(t)}function m(t){var e;return t.twitter&&""!==t.twitter&&"N/A"!==t.twitter?(e=(e=t.twitter.replace("https://twitter.com/","@")).replace("https://mobile.twitter.com/","@",e),e=dotinsights.StringUtil.rtrim(e,"/"),'<a href="'+t.twitter+'" target="_blank" class="project-link-twitter">'+e+"</a>"):'<span class="text-placeholder">--</span>'}function v(t){return t.github&&""!==t.github&&"N/A"!==t.github?'<a href="'+t.github+'" target="_blank" class="project-link-github"><span class="fab fa-github"></span></a>':'<span class="text-placeholder">--</span>'}y(document.body).on("dotinsights/EcosystemMap/Loaded",function(){dotinsights.FilteredProjects=dotinsights.Projects;var m,v,j,t=dotinsights.FilteredProjects.length;function e(){j.empty();var t=j.width(),e=[],i={},s=!1,o=0,n=0,a=1,r=(window.innerWidth<768?a=.5:window.innerWidth<1200&&(a=.8),2115-window.innerWidth);r*=a,r=Math.max(r,700),j.height(r);for(var l=0;l<v;l++){var d=dotinsights.NumberUtil.precisionRoundMod(m[l].r*a,0);m[l].displayR=Math.max(d,40)}for(;e.length<v&&o<1e4;){(i=m[n]).x=dotinsights.NumberUtil.getRandomInt(i.displayR,t-i.displayR),i.y=dotinsights.NumberUtil.getRandomInt(i.displayR,r-i.displayR);for(s=!1,l=0;l<e.length;l++){var c=e[l];if(dotinsights.NumberUtil.dist(i.x,i.y,c.x,c.y)<i.displayR+c.displayR){s=!0;break}}s||(e.push(i),n++),o++}for(var g=["move-slow","move-normal","move-fast"],l=0;l<e.length;l++){var p=e[l],h=p.vote_count||0,u="bubble-project bubble-project--"+p.project_slug,u='<div class="'+((u+=l%2==0?" move-vertical":" move-vertical-reversed")+(" "+g[dotinsights.NumberUtil.getRandomInt(0,3)]))+'">',h=(u=(u+='<img src="./assets/images/projects/'+p.project_slug+'.png" alt="">')+("<h3>"+p.project+'</h3><div class="vote-count"><svg><use xlink:href="#symbol-ph-heart-straight"></use></svg>'+h+"</div>"),y(u+="</div>"));h.css({width:2*p.displayR,height:2*p.displayR,top:p.y-p.displayR,left:p.x-p.displayR}),h.css("--circle-size",2*p.displayR+"px"),j.append(h)}}dotinsights.Query.page=1,dotinsights.Query.foundItems=t,dotinsights.Query.maxNumPages=0<dotinsights.Query.itemsPerPage?Math.ceil(t/dotinsights.Query.itemsPerPage):1,v=(m=[{project_slug:"polkadot",name:"Polkadot",r:197},{project_slug:"subwallet",name:"SubWallet",r:144},{project_slug:"ampnet",name:"Ampnet",r:107},{project_slug:"acala",name:"Acala",r:88},{project_slug:"demodyfi",name:"Demodyfi",r:121},{project_slug:"chainsafe",name:"ChainSafe",r:102},{project_slug:"1beam",name:"1beam",r:102},{project_slug:"unilend",name:"Unilend",r:96},{project_slug:"metamask",name:"MetaMask",r:76},{project_slug:"onfinality",name:"OnFinality",r:68},{project_slug:"nabox",name:"Nabox",r:77},{project_slug:"anchor",name:"Anchor",r:52},{project_slug:"athos-finance",name:"Athos Finance",r:64},{project_slug:"huckleberry",name:"Huckleberry",r:39},{project_slug:"ambire-wallet",name:"Ambire Wallet",r:48},{project_slug:"kusama",name:"Kusama",r:57},{project_slug:"lido",name:"Lido",r:60},{project_slug:"beyondfi",name:"BeyondFi",r:38},{project_slug:"basilisk",name:"Basilisk",r:49},{project_slug:"avault",name:"Avault",r:35},{project_slug:"curve",name:"Curve",r:60},{project_slug:"linear",name:"Linear",r:54},{project_slug:"prime-protocol",name:"Prime Protocol",r:33},{project_slug:"riodefi",name:"RioDeFi",r:57},{project_slug:"parallel",name:"Parallel",r:76}]).length,j=y("#bubble-projects"),m=m.map(function(t,e){return{...t,project:t.name}}),e(),y(window).on("hresize_one",function(){e()}),o(),n()}),s.on("keyup",".search-field",function(){clearTimeout(e),e=setTimeout(function(){t.addClass("updating-icon"),setTimeout(function(){t.removeClass("updating-icon"),y(document.body).trigger("dotinsights/EcosystemMap/Searching")},300)},700)}),s.on("submit",function(t){return clearTimeout(e),e=setTimeout(function(){y(document.body).trigger("dotinsights/EcosystemMap/Searching")},700),!1}),y(document.body).on("dotinsights/EcosystemMap/Searching",function(t){var e=s.find('input[name="s"]').val(),i=[],e=(""!==e&&i.push({key:"project",value:e,operator:"like"}),dotinsights.FilteredProjects=0<i.length?h.filterByRules(i,dotinsights.Projects):dotinsights.Projects,dotinsights.FilteredProjects.length);dotinsights.Query.page=1,dotinsights.Query.foundItems=e,dotinsights.Query.maxNumPages=0<dotinsights.Query.itemsPerPage?Math.ceil(e/dotinsights.Query.itemsPerPage):1,o(),n()}),y(window).on("hresize",function(){window.innerWidth<561?dotinsights.Pagination.midSize=2:dotinsights.Pagination.midSize=3,window.innerWidth<768?dotinsights.Query.itemsPerPage=10:dotinsights.Query.itemsPerPage=50}),a.on("click","a",function(t){t.preventDefault(),dotinsights.Query.page=y(this).data("page");t=u.offset().top-120;y("html, body").animate({scrollTop:t},200),o(),n()})}(jQuery);