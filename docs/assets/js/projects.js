!function(d){"use strict";window.dotinsights=window.dotinsights||{},dotinsights.Projects=dotinsights.Projects||{},dotinsights.Query=dotinsights.Query||{itemsPerPage:3,maxNumPages:1,page:1,foundItems:0},dotinsights.FilteredProjects=dotinsights.FilteredProjects||{};var o=window.dotinsights.Helpers,s=0,a=d(window),i={wallet:{name:"Wallet"},infrastructure:{name:"Infrastructure"},defi:{name:"DeFi"},socialfi:{name:"SocialFi"},privacy:{name:"Privacy"},aggregator:{name:"Aggregator"},bridge:{name:"Bridge"},cold_wallet:{name:"Cold Wallet"},dao:{name:"DAO"},data:{name:"Data"},fintech:{name:"FinTech"},gaming:{name:"Gaming"},identity:{name:"Identity"},nft_collection:{name:"NFT Collection"},iot:{name:"IoT"},nft_marketplace:{name:"NFT Marketplace"},scanner:{name:"Scanner"},smartcontracts:{name:"Smart Contract"},storage:{name:"Storage"},security:{name:"Security"},launchpad:{name:"LaunchPad"},metaverse:{name:"Metaverse"},sustainability:{name:"Sustainability"},tooling:{name:"Tooling"},validator:{name:"Validator"}},n=d("#project-form-filter"),t=n.find(".search-submit"),e=null,h=d("#project-categories-list"),r=d("#btn-load-more-projects");function c(t){t=o.groupByKey(t,"category_slug");var e,s,a=[];for(e in i)t.hasOwnProperty(e)&&((s=i[e]).key=e,s.projects=t[e],a.push(s));var n=a.length;dotinsights.FilteredProjects=a,dotinsights.Query.page=1,dotinsights.Query.foundItems=n,dotinsights.Query.maxNumPages=0<dotinsights.Query.itemsPerPage?Math.ceil(n/dotinsights.Query.itemsPerPage):1,1<dotinsights.Query.maxNumPages?r.show():r.hide()}function l(t=!1){for(var e=(dotinsights.Query.page-1)*dotinsights.Query.itemsPerPage+1,s="",a=(a=e+dotinsights.Query.itemsPerPage)>dotinsights.Query.foundItems?dotinsights.Query.foundItems+1:a,n=e;n<a;n++){var o=dotinsights.FilteredProjects[n-1],i=o.projects,r=i.length,c="tm-animation fade-in-up cat-item cat-"+o.key,l=""!==o.name?o.name:"Others";s=s+('<div class="'+c+'"><h3 class="'+("project-category-name project-cat-color--"+o.key)+'">'+l+'<span class="count">'+r+"</span></h3>")+'<div class="projects-grid grid-modern" style="--grid-columns-desktop: 8; --grid-gutter-desktop: 20;--grid-columns-laptop: 7; --grid-columns-tablet-extra: 6; --grid-columns-tablet: 4; --grid-columns-mobile-extra: 3; --grid-columns-mobile: 2;">';for(var g=0;g<r;g++)var m=i[g],u="../assets/images/projects/"+m.project_slug+".png",s=(s=(s+='<a href="'+m.website+'" target="_blank" rel="nofollow" class="grid-item project-item">')+('<div class="project-thumbnail"><img src="'+u+'" alt="'+m.project+'" width="80" height="80"/></div>'))+('<div class="project-info"><h3 class="project-name">'+m.project+"</h3></div>")+"</a>";s+="</div></div>"}t?h.append(s):h.html(s),h.find(".tm-animation").waypoint(function(){var t=this.element||d(this);d(t).addClass("animate")},{offset:"100%"})}d(document.body).on("dotinsights/EcosystemMap/Loaded",function(){c(dotinsights.Projects);for(var t=dotinsights.Projects.length,e=d("#project-categories-filter"),s='<a href="#" data-cat="" class="current filter-item filter-all"><span class="filter-name">All projects</span><span class="filter-count">'+t+"</span></a>",a=0;a<dotinsights.FilteredProjects.length;a++){var n=dotinsights.FilteredProjects[a],o=n.projects,i="filter-item project-cat-color--"+n.key;s+='<a href="#" data-cat="'+n.key+'" class="'+i+'"><span class="filter-name">'+n.name+'</span><span class="filter-count">'+o.length+"</span></a>"}e.html(s),l()}),n.on("keyup",".search-field",function(){clearTimeout(e),e=setTimeout(function(){t.addClass("updating-icon"),setTimeout(function(){t.removeClass("updating-icon"),d(document.body).trigger("dotinsights/EcosystemMap/Searching")},300)},700)}),n.on("submit",function(t){return clearTimeout(e),e=setTimeout(function(){d(document.body).trigger("dotinsights/EcosystemMap/Searching")},700),!1}),d(document.body).on("dotinsights/EcosystemMap/Searching",function(t){var e=n.find('input[name="s"]').val(),s=n.find('input[name="cat"]').val(),a=[];""!==e&&a.push({key:"project",value:e,operator:"like"}),""!==s&&a.push({key:"category_slug",value:s,operator:"="}),c(0<a.length?o.filterByRules(a,dotinsights.Projects):dotinsights.Projects),l()}),d(document.body).on("click",".filter-item",function(t){t.preventDefault();var e,t=d(this);t.hasClass("current")||(e=d(this).data("cat"),t.siblings().removeClass("current"),t.addClass("current"),n.find('input[name="cat"]').val(e),n.trigger("dotinsights/EcosystemMap/Searching"))}),d(document.body).on("click","#btn-load-more-projects",function(t){t.preventDefault();var e=d(this);dotinsights.Query.page<dotinsights.Query.maxNumPages&&(r.addClass("updating-icon"),setTimeout(function(){dotinsights.Query.page+=1,l(!0),r.removeClass("updating-icon"),dotinsights.Query.page===dotinsights.Query.maxNumPages&&e.hide()},700))}),a.on("scroll",function(){var t,e=d(this).scrollTop();s<e&&(t=a.height(),t=parseInt(.9*t),r.offset().top+r.outerHeight(!0)-t<=e&&(r.hasClass("updating-icon")||r.trigger("click"))),s=e})}(jQuery);