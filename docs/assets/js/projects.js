!function(h){"use strict";window.dotinsights=window.dotinsights||{},dotinsights.Projects=dotinsights.Projects||{},dotinsights.Query=dotinsights.Query||{itemsPerPage:3,maxNumPages:1,page:1,foundItems:0},dotinsights.FilteredProjects=dotinsights.FilteredProjects||{};var r=window.dotinsights.Helpers,s=0,i=h(window),a={wallet:10,infrastructure:20,defi:30,socialfi:40,privacy:50,aggregator:60,bridge:70,cold_wallet:80,dao:90,data:100,fintech:110,gaming:120,identity:130,nft_collection:140,iot:150,nft_marketplace:160,explorer:170,smart_contract:180,storage:190,security:200,launchpad:210,metaverse:220,sustainability:230,tooling:240,validator:250,fiat_on_ramp:260,uncategorized:270},o=h("#project-form-filter"),t=o.find(".search-submit"),e=null,m=h("#project-categories-list"),n=h("#btn-load-more-projects");function c(t){var e,s=[];for(e in t=r.groupByKey(t,"category_slug")){var i={key:e,name:t[e][0].category,projects:t[e]};i.order=a.hasOwnProperty(e)?a[e]:0,s.push(i)}var o=(s=dotinsights.ArrayUtil.sortByKey(s,"order","ASC")).length;dotinsights.FilteredProjects=s,dotinsights.Query.page=1,dotinsights.Query.foundItems=o,dotinsights.Query.maxNumPages=0<dotinsights.Query.itemsPerPage?Math.ceil(o/dotinsights.Query.itemsPerPage):1,1<dotinsights.Query.maxNumPages?n.show():n.hide()}function d(t=!1){for(var e=(dotinsights.Query.page-1)*dotinsights.Query.itemsPerPage+1,s="",i=(i=e+dotinsights.Query.itemsPerPage)>dotinsights.Query.foundItems?dotinsights.Query.foundItems+1:i,o=e;o<i;o++){var r=dotinsights.FilteredProjects[o-1],a=r.projects,n=a.length,c="tm-animation fade-in-up cat-item cat-"+r.key,d=""!==r.name?r.name:"Others";s=s+('<div class="'+c+'"><h3 class="'+("project-category-name project-cat-color--"+r.key)+'">'+d+'<span class="count">'+n+"</span></h3>")+'<div class="projects-grid grid-modern" style="--grid-columns-desktop: 8; --grid-gutter-desktop: 20;--grid-columns-laptop: 7; --grid-columns-tablet-extra: 6; --grid-columns-tablet: 4; --grid-columns-mobile-extra: 3; --grid-columns-mobile: 2;">';for(var l=0;l<n;l++)var g=a[l],u="../assets/images/projects/"+g.project_slug+".png",s=(s=(s+='<a href="'+g.website+'" target="_blank" rel="nofollow" class="grid-item project-item">')+('<div class="project-thumbnail"><img src="'+u+'" alt="'+g.project+'" width="80" height="80"/></div>'))+('<div class="project-info"><h3 class="project-name">'+g.project+"</h3></div>")+"</a>";s+="</div></div>"}t?m.append(s):m.html(s),m.find(".tm-animation").waypoint(function(){var t=this.element||h(this);h(t).addClass("animate")},{offset:"100%"})}h(document.body).on("dotinsights/EcosystemMap/Loaded",function(){c(dotinsights.Projects);for(var t=dotinsights.Projects.length,e=h("#project-categories-filter"),s='<a href="#" data-cat="" class="current filter-item filter-all"><span class="filter-name">All projects</span><span class="filter-count">'+t+"</span></a>",i=0;i<dotinsights.FilteredProjects.length;i++){var o=dotinsights.FilteredProjects[i],r=o.projects,a="filter-item project-cat-color--"+o.key;s+='<a href="#" data-cat="'+o.key+'" class="'+a+'"><span class="filter-name">'+o.name+'</span><span class="filter-count">'+r.length+"</span></a>"}e.html(s),d()}),o.on("keyup",".search-field",function(){clearTimeout(e),e=setTimeout(function(){t.addClass("updating-icon"),setTimeout(function(){t.removeClass("updating-icon"),h(document.body).trigger("dotinsights/EcosystemMap/Searching")},300)},700)}),o.on("submit",function(t){return clearTimeout(e),e=setTimeout(function(){h(document.body).trigger("dotinsights/EcosystemMap/Searching")},700),!1}),h(document.body).on("dotinsights/EcosystemMap/Searching",function(t){var e=o.find('input[name="s"]').val(),s=o.find('input[name="cat"]').val(),i=[];""!==e&&i.push({key:"project",value:e,operator:"like"}),""!==s&&i.push({key:"category_slug",value:s,operator:"="}),c(0<i.length?r.filterByRules(i,dotinsights.Projects):dotinsights.Projects),d()}),h(document.body).on("click",".filter-item",function(t){t.preventDefault();var e,t=h(this);t.hasClass("current")||(e=h(this).data("cat"),t.siblings().removeClass("current"),t.addClass("current"),o.find('input[name="cat"]').val(e),o.trigger("dotinsights/EcosystemMap/Searching"))}),h(document.body).on("click","#btn-load-more-projects",function(t){t.preventDefault();var e=h(this);dotinsights.Query.page<dotinsights.Query.maxNumPages&&(n.addClass("updating-icon"),setTimeout(function(){dotinsights.Query.page+=1,d(!0),n.removeClass("updating-icon"),dotinsights.Query.page===dotinsights.Query.maxNumPages&&e.hide()},700))}),i.on("scroll",function(){var t,e=h(this).scrollTop();s<e&&(t=i.height(),t=parseInt(.9*t),n.offset().top+n.outerHeight(!0)-t<=e&&(n.hasClass("updating-icon")||n.trigger("click"))),s=e})}(jQuery);